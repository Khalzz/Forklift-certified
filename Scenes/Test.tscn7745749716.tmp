[gd_scene load_steps=20 format=3 uid="uid://cyctv4o556y1e"]

[ext_resource type="Texture2D" uid="uid://bemvhniy4n5e6" path="res://Assets/Materials/orange.png" id="1_f2nln"]
[ext_resource type="Script" uid="uid://cf61wgupyo1jn" path="res://Assets/Scripts/player.gd" id="1_gxb1y"]
[ext_resource type="PackedScene" uid="uid://rnlbjyt78edc" path="res://Assets/Models/forklift.glb" id="1_ko2s7"]
[ext_resource type="Script" uid="uid://c84ykpjmg20bk" path="res://Scenes/camera.gd" id="2_0dy5s"]
[ext_resource type="Script" uid="uid://c3u6dvv8a7lnn" path="res://Assets/Scripts/Player/StateMachine/idle.gd" id="4_06fis"]
[ext_resource type="Script" uid="uid://cciub86iwsl6u" path="res://Assets/Scripts/Player/StateMachine/state_machine.gd" id="4_mma61"]
[ext_resource type="Texture2D" uid="uid://chbptwry3jerb" path="res://Assets/Materials/red.png" id="5_efk68"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_f2nln"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_efk68"]
sky_material = SubResource("ProceduralSkyMaterial_f2nln")

[sub_resource type="Environment" id="Environment_06fis"]
background_mode = 1
background_color = Color(0.509306, 0.667922, 1, 1)
sky = SubResource("Sky_efk68")
tonemap_mode = 2
fog_light_energy = 13.46

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ko2s7"]

[sub_resource type="BoxShape3D" id="BoxShape3D_efk68"]
size = Vector3(0.217926, 0.301849, 0.4823)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_06fis"]
albedo_texture = ExtResource("5_efk68")
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="BoxMesh" id="BoxMesh_mma61"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_0dy5s"]
friction = 0.7

[sub_resource type="BoxShape3D" id="BoxShape3D_ki7sg"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_efk68"]
albedo_texture = ExtResource("1_f2nln")
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_gxb1y"]

[sub_resource type="BoxShape3D" id="BoxShape3D_f2nln"]
size = Vector3(1, 0.0229492, 1)

[node name="World" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_06fis")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.0977219, 0.995214, 0, -0.995214, 0.0977219, 0, 20.9353, 0)
light_volumetric_fog_energy = 0.0
light_specular = 0.0
shadow_enabled = true
shadow_blur = 1.312
directional_shadow_max_distance = 91.3

[node name="Player" type="Node3D" parent="." node_paths=PackedStringArray("model", "stateLabel", "ground_ray", "rigid_body")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0531898, 2.38419e-07, -0.0206695)
script = ExtResource("1_gxb1y")
model = NodePath("RigidBody3D/forklift")
stateLabel = NodePath("RigidBody3D/Label3D")
ground_ray = NodePath("RigidBody3D/GroundRay")
rigid_body = NodePath("RigidBody3D")

[node name="Camera" type="Camera3D" parent="Player" node_paths=PackedStringArray("followable")]
transform = Transform3D(0.945143, 0.0547516, -0.322036, -0.0521194, 0.9985, 0.0167966, 0.322472, 0.000909087, 0.946579, -0.209985, 0.33583, 0.441014)
fov = 80.0
script = ExtResource("2_0dy5s")
followable = NodePath("../RigidBody3D")

[node name="RigidBody3D" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0317039, 0.335834, 0.015029)
physics_material_override = SubResource("PhysicsMaterial_ko2s7")
lock_rotation = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00645447, -0.0405118, 0.0701294)
shape = SubResource("BoxShape3D_efk68")

[node name="forklift" parent="Player/RigidBody3D" instance=ExtResource("1_ko2s7")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, -0.171423, 0)

[node name="Label3D" type="Label3D" parent="Player/RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00127888, 0.292313, -0.00440219)
visible = false
text = "Skibidi"

[node name="GroundRay" type="RayCast3D" parent="Player/RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0147762, -0.096975, -0.0107851)
target_position = Vector3(0, -0.1, 0)

[node name="Debug" type="Node3D" parent="Player"]

[node name="StateMachine" type="Node" parent="Player" node_paths=PackedStringArray("idle_node", "jumping_node", "running_node")]
script = ExtResource("4_mma61")
idle_node = NodePath("Idle")
jumping_node = NodePath("Jumping")
running_node = NodePath("Running")

[node name="Jumping" type="Node" parent="Player/StateMachine"]

[node name="Running" type="Node" parent="Player/StateMachine"]

[node name="Idle" type="Node" parent="Player/StateMachine"]
script = ExtResource("4_06fis")

[node name="Falling" type="Node" parent="Player/StateMachine"]

[node name="box2" type="Node3D" parent="."]
transform = Transform3D(2.99, 0, 0, 0, 1, 0, 0, 0, 2.85, 2.51015, -0.0648944, 4.39922)

[node name="BaseBox" type="MeshInstance3D" parent="box2"]
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")
skeleton = NodePath("../../box2")

[node name="StaticBody3D" type="StaticBody3D" parent="box2/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="box2/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="box" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.50126, 0.498787, 0)

[node name="BaseBox" type="MeshInstance3D" parent="box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -0.000324845)
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")

[node name="StaticBody3D" type="StaticBody3D" parent="box/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="box/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="Floor" type="Node3D" parent="."]
transform = Transform3D(100, 0, 0, 0, 1, 0, 0, 0, 100, 0, 0, 0)

[node name="FloorMesh" type="MeshInstance3D" parent="Floor"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_efk68")
mesh = SubResource("PlaneMesh_gxb1y")

[node name="StaticBody3D" type="StaticBody3D" parent="Floor/FloorMesh"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor/FloorMesh/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0127389, 0)
shape = SubResource("BoxShape3D_f2nln")
