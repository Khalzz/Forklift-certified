[gd_scene load_steps=34 format=3 uid="uid://cyctv4o556y1e"]

[ext_resource type="Texture2D" uid="uid://bemvhniy4n5e6" path="res://Assets/Materials/orange.png" id="1_f2nln"]
[ext_resource type="Script" uid="uid://cf61wgupyo1jn" path="res://Assets/Scripts/player.gd" id="1_gxb1y"]
[ext_resource type="PackedScene" uid="uid://rnlbjyt78edc" path="res://Assets/Models/forklift.glb" id="1_ko2s7"]
[ext_resource type="Script" uid="uid://c84ykpjmg20bk" path="res://Scenes/camera.gd" id="2_0dy5s"]
[ext_resource type="Texture2D" uid="uid://dtcx7mqa1mrtp" path="res://Assets/Sprites/Arrow.svg" id="3_rarx8"]
[ext_resource type="Script" uid="uid://c3u6dvv8a7lnn" path="res://Assets/Scripts/Player/StateMachine/idle.gd" id="4_06fis"]
[ext_resource type="Script" uid="uid://cciub86iwsl6u" path="res://Assets/Scripts/Player/StateMachine/state_machine.gd" id="4_mma61"]
[ext_resource type="Texture2D" uid="uid://chbptwry3jerb" path="res://Assets/Materials/red.png" id="5_efk68"]
[ext_resource type="Script" uid="uid://drrpbr3low47p" path="res://Assets/Scripts/Player/StateMachine/jumping.gd" id="5_ki7sg"]
[ext_resource type="Script" uid="uid://bvg1d7jg2ynxq" path="res://Assets/Scripts/Player/grind_checker.gd" id="6_8d4ee"]
[ext_resource type="Script" uid="uid://cfv4cisxi8pcs" path="res://Assets/Scripts/Player/StateMachine/running.gd" id="6_kq4yt"]
[ext_resource type="PackedScene" uid="uid://cr0h0q780l4sw" path="res://Assets/Prefabs/Player/Ui.tscn" id="7_c5xim"]
[ext_resource type="Script" uid="uid://b30gkcaddh03e" path="res://Assets/Scripts/Player/StateMachine/falling.gd" id="7_rxb08"]
[ext_resource type="Texture2D" uid="uid://dqwep4p137nib" path="res://Assets/Sprites/Sparks.svg" id="10_wjxug"]
[ext_resource type="Script" uid="uid://cyvw2df3lkh7y" path="res://Assets/Scripts/Player/StateMachine/grinding.gd" id="13_b07cf"]
[ext_resource type="Script" uid="uid://6e834sf1oj74" path="res://Assets/Scripts/SkateLogic/checkable_grindable_area.gd" id="14_3la1u"]
[ext_resource type="Script" uid="uid://cimwuyi1g2ovh" path="res://Assets/Scripts/SkateLogic/grind_path_follower.gd" id="16_x8mav"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_f2nln"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_efk68"]
sky_material = SubResource("ProceduralSkyMaterial_f2nln")

[sub_resource type="Environment" id="Environment_06fis"]
background_mode = 1
background_color = Color(0.509306, 0.667922, 1, 1)
sky = SubResource("Sky_efk68")
tonemap_mode = 2
fog_light_energy = 13.46

[sub_resource type="SphereMesh" id="SphereMesh_8d4ee"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_ko2s7"]

[sub_resource type="BoxShape3D" id="BoxShape3D_efk68"]
size = Vector3(0.217926, 0.279831, 0.319763)

[sub_resource type="SphereShape3D" id="SphereShape3D_wjxug"]
radius = 0.735003

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_06fis"]
albedo_texture = ExtResource("5_efk68")
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="BoxMesh" id="BoxMesh_mma61"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_0dy5s"]
friction = 0.7

[sub_resource type="BoxShape3D" id="BoxShape3D_ki7sg"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_efk68"]
albedo_texture = ExtResource("1_f2nln")
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="PlaneMesh" id="PlaneMesh_gxb1y"]

[sub_resource type="BoxShape3D" id="BoxShape3D_f2nln"]
size = Vector3(1, 0.0229492, 1)

[sub_resource type="Curve3D" id="Curve3D_c5xim"]
bake_interval = 0.01
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0),
"tilts": PackedFloat32Array(0, 0)
}
point_count = 2

[sub_resource type="BoxShape3D" id="BoxShape3D_8d4ee"]
size = Vector3(1, 0.078125, 1)

[node name="World" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_06fis")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.0977219, 0.995214, 0, -0.995214, 0.0977219, 0, 20.9353, 0)
light_volumetric_fog_energy = 0.0
light_specular = 0.0
shadow_enabled = true
shadow_blur = 1.312
directional_shadow_max_distance = 91.3

[node name="Player" type="Node3D" parent="." node_paths=PackedStringArray("model", "ground_ray", "rigid_body", "ui")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0531898, 2.38419e-07, -0.0206695)
script = ExtResource("1_gxb1y")
model = NodePath("RigidBody/forklift")
ground_ray = NodePath("RigidBody/GroundRays/GroundRayLB")
rigid_body = NodePath("RigidBody")
ui = NodePath("Ui")

[node name="Camera" type="Camera3D" parent="Player" node_paths=PackedStringArray("followable")]
transform = Transform3D(0.945143, 0.0547516, -0.322036, -0.0521194, 0.9985, 0.0167966, 0.322472, 0.000909087, 0.946579, -0.209985, 0.33583, 0.441014)
fov = 80.0
script = ExtResource("2_0dy5s")
followable = NodePath("../RigidBody")

[node name="Direction" type="Sprite3D" parent="Player"]
transform = Transform3D(0.1, 0, 0, 0, -4.37114e-09, -0.1, 0, 0.1, -4.37114e-09, 0.0252494, 0.211395, 0.543096)
texture_filter = 0
texture = ExtResource("3_rarx8")

[node name="Debug" type="Node3D" parent="Player"]

[node name="DebuggerGrind" type="MeshInstance3D" parent="Player/Debug"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0.0317039, 0.290747, 0.015029)
visible = false
mesh = SubResource("SphereMesh_8d4ee")
skeleton = NodePath("../../RigidBody/GrindChecker")

[node name="RigidBody" type="RigidBody3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0317039, 0.335834, 0.015029)
physics_material_override = SubResource("PhysicsMaterial_ko2s7")
lock_rotation = true

[node name="forklift" parent="Player/RigidBody" instance=ExtResource("1_ko2s7")]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, -0.171423, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/RigidBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00645447, -0.0295027, -0.011139)
shape = SubResource("BoxShape3D_efk68")

[node name="GroundRays" type="Node3D" parent="Player/RigidBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0457289, 0)

[node name="GroundRayLB" type="RayCast3D" parent="Player/RigidBody/GroundRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0929285, -0.0820668, -0.121893)
target_position = Vector3(0, -0.1, 0)

[node name="GroundRayRB" type="RayCast3D" parent="Player/RigidBody/GroundRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.093, -0.082, -0.122)
target_position = Vector3(0, -0.1, 0)

[node name="GroundRayRF" type="RayCast3D" parent="Player/RigidBody/GroundRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0964047, -0.0820668, 0.0787327)
target_position = Vector3(0, -0.1, 0)

[node name="GroundRayLF" type="RayCast3D" parent="Player/RigidBody/GroundRays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.096, -0.082, 0.079)
target_position = Vector3(0, -0.1, 0)

[node name="Sparks" type="Node3D" parent="Player/RigidBody"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.143928, -0.118351)

[node name="LeftSpark" type="Sprite3D" parent="Player/RigidBody/Sparks"]
transform = Transform3D(0.012941, 0, 0.0482963, 0, 0.05, 0, -0.0482963, 0, 0.012941, 0.137486, 0.0887101, -0.162268)
texture = ExtResource("10_wjxug")

[node name="RightSpark" type="Sprite3D" parent="Player/RigidBody/Sparks"]
transform = Transform3D(-0.012941, 0, 0.0482963, 0, 0.05, 0, -0.0482963, 0, -0.012941, -0.137678, 0.0887101, -0.162268)
texture = ExtResource("10_wjxug")

[node name="GrindChecker" type="Area3D" parent="Player/RigidBody" node_paths=PackedStringArray("base_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0450869, 0)
script = ExtResource("6_8d4ee")
base_player = NodePath("../..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player/RigidBody/GrindChecker"]
shape = SubResource("SphereShape3D_wjxug")

[node name="Ui" parent="Player" instance=ExtResource("7_c5xim")]

[node name="StateMachine" type="Node" parent="Player" node_paths=PackedStringArray("base_player", "ground_rays", "rigid_body", "idle_node", "jumping_node", "running_node", "falling_node", "grinding_node", "direction_arrow")]
script = ExtResource("4_mma61")
base_player = NodePath("..")
ground_rays = NodePath("../RigidBody/GroundRays")
rigid_body = NodePath("../RigidBody")
idle_node = NodePath("Idle")
jumping_node = NodePath("Jumping")
running_node = NodePath("Running")
falling_node = NodePath("Falling")
grinding_node = NodePath("Grinding")
direction_arrow = NodePath("../Direction")

[node name="Jumping" type="Node" parent="Player/StateMachine"]
script = ExtResource("5_ki7sg")

[node name="Running" type="Node" parent="Player/StateMachine"]
script = ExtResource("6_kq4yt")

[node name="Idle" type="Node" parent="Player/StateMachine"]
script = ExtResource("4_06fis")

[node name="Falling" type="Node" parent="Player/StateMachine"]
script = ExtResource("7_rxb08")

[node name="Grinding" type="Node" parent="Player/StateMachine"]
script = ExtResource("13_b07cf")

[node name="box2" type="Node3D" parent="."]
transform = Transform3D(2.99, 0, 0, 0, 1, 0, 0, 0, 2.85, 2.51015, -0.0648944, 4.39922)

[node name="BaseBox" type="MeshInstance3D" parent="box2"]
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")
skeleton = NodePath("../../box2")

[node name="StaticBody3D" type="StaticBody3D" parent="box2/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="box2/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="box" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.80843, 0.498787, 0)

[node name="BaseBox" type="MeshInstance3D" parent="box"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.988583, 0, 0.498479)
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")

[node name="StaticBody3D" type="StaticBody3D" parent="box/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="box/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="Floor" type="Node3D" parent="."]
transform = Transform3D(100, 0, 0, 0, 1, 0, 0, 0, 100, 0, 0, 0)

[node name="FloorMesh" type="MeshInstance3D" parent="Floor"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_efk68")
mesh = SubResource("PlaneMesh_gxb1y")

[node name="StaticBody3D" type="StaticBody3D" parent="Floor/FloorMesh"]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Floor/FloorMesh/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0127389, 0)
shape = SubResource("BoxShape3D_f2nln")

[node name="box3" type="Node3D" parent="."]
transform = Transform3D(2.99, 0, 0, 0, 1, 0, 0, 0, 2.85, 2.51015, 0.269255, -0.0119268)

[node name="BaseBox" type="MeshInstance3D" parent="box3"]
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")
skeleton = NodePath("../../box2")

[node name="StaticBody3D" type="StaticBody3D" parent="box3/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="box3/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="Grindable" type="Node3D" parent="."]
transform = Transform3D(2.99, 0, 0, 0, 0.507512, 0, 0, 0, 0.03, 2.51015, 0.227939, 8.42547)

[node name="BaseBox" type="MeshInstance3D" parent="Grindable"]
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")
skeleton = NodePath("../../box2")

[node name="StaticBody3D" type="StaticBody3D" parent="Grindable/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Grindable/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="GrindToFollow" type="Path3D" parent="Grindable"]
transform = Transform3D(0.334448, 0, 0, 0, 1.9704, 0, 0, 0, 33.3333, -0.50263, 0.536267, 0.106781)
curve = SubResource("Curve3D_c5xim")

[node name="PathFollower" type="PathFollow3D" parent="Grindable/GrindToFollow"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0, 0)
script = ExtResource("16_x8mav")

[node name="Direction" type="Sprite3D" parent="Grindable/GrindToFollow/PathFollower"]
transform = Transform3D(0.1, 0, 0, 0, -4.37114e-09, -0.1, 0, 0.1, -4.37114e-09, 0, 0, 0)
texture_filter = 0
texture = ExtResource("3_rarx8")

[node name="CheckableGrindableArea" type="Area3D" parent="Grindable" node_paths=PackedStringArray("grid_path", "path_follower")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.537426, 0)
script = ExtResource("14_3la1u")
grid_path = NodePath("../GrindToFollow")
path_follower = NodePath("../GrindToFollow/PathFollower")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Grindable/CheckableGrindableArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 0.999991, 0, 0, 0)
shape = SubResource("BoxShape3D_8d4ee")

[node name="Grindable2" type="Node3D" parent="."]
transform = Transform3D(0.069609, 0, 0.0299919, 0.39203, 0.503128, -9.1597e-05, -2.96337, 0.0665597, 0.000692386, 1.19361, 0.809609, 2.1807)

[node name="BaseBox" type="MeshInstance3D" parent="Grindable2"]
material_override = SubResource("StandardMaterial3D_06fis")
mesh = SubResource("BoxMesh_mma61")
skeleton = NodePath("../../box2")

[node name="StaticBody3D" type="StaticBody3D" parent="Grindable2/BaseBox"]
physics_material_override = SubResource("PhysicsMaterial_0dy5s")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Grindable2/BaseBox/StaticBody3D"]
shape = SubResource("BoxShape3D_ki7sg")

[node name="GrindToFollow" type="Path3D" parent="Grindable2"]
transform = Transform3D(0.334448, 0, 0, 0, 1.9704, 0, 0, 0, 33.3333, -0.50263, 0.536267, 0.106781)
curve = SubResource("Curve3D_c5xim")

[node name="PathFollower" type="PathFollow3D" parent="Grindable2/GrindToFollow"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 0, 0, 0)
script = ExtResource("16_x8mav")

[node name="Direction" type="Sprite3D" parent="Grindable2/GrindToFollow/PathFollower"]
transform = Transform3D(0.1, 0, 0, 0, -4.37114e-09, -0.1, 0, 0.1, -4.37114e-09, 0, 0, 0)
texture_filter = 0
texture = ExtResource("3_rarx8")

[node name="CheckableGrindableArea" type="Area3D" parent="Grindable2" node_paths=PackedStringArray("grid_path", "path_follower")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.537426, 0)
script = ExtResource("14_3la1u")
grid_path = NodePath("../GrindToFollow")
path_follower = NodePath("../GrindToFollow/PathFollower")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Grindable2/CheckableGrindableArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 0.999991, 0, 0, 0)
shape = SubResource("BoxShape3D_8d4ee")
